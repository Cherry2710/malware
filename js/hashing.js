function onStateChange() {
    const value = document.getElementById("selectType").value;
    if (value == 0) {
        document.getElementById('fileSelected').style.display = 'none';
    } else {
        document.getElementById('fileSelected').style.display = 'block';
    }
}

async function onHashing() {
    const value = document.getElementById("selectType").value;
    let type = '';
    let param = '';
    var filename = '';
    if (value == 0) {
        param = document.getElementById('string').value;
        type = '-s';

    } else {
        param = document.getElementById('fileSelected').files[0];
        type = '-f';
    }
    console.log(param);
    let result = await hash(type, param);
    const chkMd5 = document.getElementById('MD5').checked;
    const chkMd4 = document.getElementById('MD4').checked;
    const chkSha1 = document.getElementById('SHA1').checked;
    const chkSha256 = document.getElementById('SHA256').checked;
    const chkSha384 = document.getElementById('SHA384').checked;
    const chkSha512 = document.getElementById('SHA512').checked;
    const chkRipeMd160 = document.getElementById('RIPEMD160').checked;
    const chkMd2 = document.getElementById('MD2').checked;
    console.log(param)
    if (chkMd5) {
        document.getElementById('inputMD5').value = result['md5'];
    } else {
        document.getElementById('inputMD5').value = "";
    }
    if (chkMd4) {
        document.getElementById('inputMD4').value = result['md4'];
    } else {
        document.getElementById('inputMD4').value = "";
    }
    if (chkSha1) {
        document.getElementById('inputSHA1').value = result['sha1'];
    } else {
        document.getElementById('inputSHA1').value = "";
    }
    if (chkSha256) {
        document.getElementById('inputSHA256').value = result['sha256'];
    } else {
        document.getElementById('inputSHA256').value = "";
    }
    if (chkSha384) {
        document.getElementById('inputSHA384').value = result['sha384'];
    } else {
        document.getElementById('inputSHA384').value = "";
    }
    if (chkSha512) {
        document.getElementById('inputSHA512').value = result['sha512'];
    } else {
        document.getElementById('inputSHA512').value = "";
    }
    if (chkRipeMd160) {
        document.getElementById('inputRIPEMD160').value = result['ripemd160'];
    } else {
        document.getElementById('inputRIPEMD160').value = "";
    }
    if (chkMd2) {
        document.getElementById('inputMD2').value = result['md2'];
    } else {
        document.getElementById('inputMD2').value = "";
    }
    console.log(result);
}

async function hash(type, param) {
    const formData = new FormData();
    formData.append('type', type);
    formData.append('param', param);
    const request = await fetch("http://localhost:5000/hash", {
        method: 'POST',
        body: formData
    })
    const response = await request.json()

    return response;
}
